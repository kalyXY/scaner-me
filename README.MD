# ğŸ“ SystÃ¨me de PrÃ©sence QR - PHP Natif

Un systÃ¨me professionnel de gestion des prÃ©sences et examens utilisant des codes QR, dÃ©veloppÃ© en **PHP 8.0.30 natif** avec **MySQL via XAMPP** et **JavaScript**.

## âœ¨ FonctionnalitÃ©s

- ğŸ“± **Scanner QR Moderne** - Interface camÃ©ra avec scan en temps rÃ©el (JavaScript natif)
- ğŸ“Š **Tableau de bord professionnel** - Interface responsive pure CSS/HTML
- ğŸ¯ **ContrÃ´le d'examens** - VÃ©rification automatique des paiements
- ğŸ“ˆ **Rapports dÃ©taillÃ©s** - Statistiques de prÃ©sence par session et Ã©tudiant
- ğŸ’³ **Gestion des paiements** - Suivi des paiements d'examens
- ğŸ” **Autorisations d'examen** - ContrÃ´le d'accÃ¨s basÃ© sur les paiements
- ğŸ“„ **Export CSV** - Export des donnÃ©es de prÃ©sence
- ğŸ—ï¸ **Architecture MVC** - Code structurÃ© et maintenable
- ğŸ” **Logging simple** - TraÃ§abilitÃ© des actions
- ğŸš€ **API RESTful** - Endpoints modernes avec rÃ©ponses JSON
- ğŸ“± **Mobile First** - OptimisÃ© pour smartphones et tablettes
- âš¡ **ZÃ©ro dÃ©pendance** - PHP natif uniquement, pas de Composer

## ğŸ› ï¸ PrÃ©requis

- **XAMPP** avec PHP 8.0.30 et MySQL
- Navigateur web moderne (Chrome, Firefox, Safari, Edge)

## âš¡ Installation Rapide

1. **Installer XAMPP**
   - TÃ©lÃ©chargez depuis [apachefriends.org](https://www.apachefriends.org/)
   - Installez avec PHP 8.0.30
   - DÃ©marrez Apache et MySQL

2. **Copier les fichiers**
   ```bash
   # Copiez tous les fichiers dans htdocs/qr-attendance/
   # Exemple: C:\xampp\htdocs\qr-attendance\
   ```

3. **Configurer la base de donnÃ©es**
   - Ouvrez phpMyAdmin: http://localhost/phpmyadmin
   - CrÃ©ez la base `school_mvp`
   - Importez `schema.sql`

4. **Tester l'installation**
   ```bash
   # Ouvrez dans votre navigateur:
   http://localhost/qr-attendance/test_installation.php
   ```

5. **AccÃ©der Ã  l'application**
   - Dashboard: http://localhost/qr-attendance/public/
   - Scanner QR: http://localhost/qr-attendance/public/scanner
   - API Health: http://localhost/qr-attendance/public/api/health

## ğŸ”§ Configuration

### Fichier de configuration : `config_native.php`

```php
// Configuration XAMPP par dÃ©faut
define('DB_HOST', '127.0.0.1');
define('DB_PORT', '3306');
define('DB_NAME', 'school_mvp');
define('DB_USER', 'root');
define('DB_PASS', ''); // Vide pour XAMPP par dÃ©faut
```

### Variables d'environnement
- `APP_ENV` - development/production
- `APP_NAME` - Nom de l'application
- Configuration timezone (Europe/Paris par dÃ©faut)

## ğŸ“¡ API Endpoints

### PrÃ©sences
- `POST /api/attendance` - Enregistrer une prÃ©sence
- `GET /api/attendance` - Obtenir les prÃ©sences
- `GET /api/students` - Liste des Ã©tudiants
- `POST /api/students` - Ajouter un Ã©tudiant

### SystÃ¨me
- `GET /api/health` - Ã‰tat de santÃ© du systÃ¨me
- `GET /api/export/csv` - Export CSV des prÃ©sences

### Exemples d'utilisation

**Enregistrer une prÃ©sence :**
```bash
curl -X POST http://localhost/qr-attendance/public/api/attendance \
  -H "Content-Type: application/json" \
  -d '{"qr_code": "00000000-0000-0000-0000-000000000001"}'
```

**Health Check :**
```bash
curl http://localhost/qr-attendance/public/api/health
```

## ğŸ§ª Test Rapide

1. **Tester l'installation**
   ```
   http://localhost/qr-attendance/test_installation.php
   ```

2. **Test du scanner**
   - Aller sur http://localhost/qr-attendance/public/scanner
   - Cliquer "DÃ©marrer le scanner"
   - Autoriser l'accÃ¨s camÃ©ra
   - Scanner un QR code ou saisir manuellement un UUID

3. **DonnÃ©es de test**
   - ExÃ©cutez `scripts/seed_sample_data.php` pour des donnÃ©es d'exemple
   - UUIDs de test : `00000000-0000-0000-0000-000000000001` Ã  `000000008`

## ğŸ—ï¸ Architecture PHP Natif

```
/
â”œâ”€â”€ autoload.php           # Autoloader PHP natif simple
â”œâ”€â”€ bootstrap.php          # Bootstrap de l'application
â”œâ”€â”€ config_native.php      # Configuration XAMPP
â”œâ”€â”€ test_installation.php  # Script de test
â”œâ”€â”€ public/               # Point d'entrÃ©e web
â”‚   â”œâ”€â”€ index.php         # Routeur principal
â”‚   â”œâ”€â”€ dashboard.php     # Tableau de bord
â”‚   â””â”€â”€ scanner.php       # Interface de scan QR
â””â”€â”€ src/                  # Code source
    â”œâ”€â”€ Config/           # Classes de configuration
    â”œâ”€â”€ Controllers/      # ContrÃ´leurs MVC
    â”œâ”€â”€ Models/          # ModÃ¨les de donnÃ©es
    â”œâ”€â”€ Services/        # Services mÃ©tier
    â””â”€â”€ Utils/           # Fonctions utilitaires
```

## ğŸ¯ Scanner QR Code

Le scanner utilise la bibliothÃ¨que JavaScript `html5-qrcode` :
- Interface moderne et responsive
- Support camÃ©ra temps rÃ©el
- Gestion d'erreurs complÃ¨te
- Feedback visuel immÃ©diat
- Compatible mobile/desktop

## ğŸ“Š Base de DonnÃ©es MySQL

### Structure principale
- `students` - Ã‰tudiants et leurs UUIDs
- `courses` - Cours et matiÃ¨res  
- `course_sessions` - Sessions de cours planifiÃ©es
- `attendance` - Enregistrements de prÃ©sence
- `payments` - Paiements d'examens
- `exam_authorizations` - Autorisations d'examen

### Import du schÃ©ma
```sql
-- Via phpMyAdmin ou ligne de commande
mysql -u root school_mvp < schema.sql
```

## ğŸ”’ SÃ©curitÃ©

- **Validation d'entrÃ©e** stricte avec fonctions natives PHP
- **Ã‰chappement des sorties** avec `htmlspecialchars()`
- **RequÃªtes prÃ©parÃ©es** PDO pour Ã©viter les injections SQL
- **Headers de sÃ©curitÃ©** configurÃ©s
- **Logging des erreurs** en mode dÃ©veloppement

## ğŸš€ Avantages PHP Natif

- âœ… **ZÃ©ro dÃ©pendance** - Pas de Composer, vendor/ ou autoload complexe
- âœ… **Performance** - Pas de surcharge de frameworks
- âœ… **SimplicitÃ©** - Code facile Ã  comprendre et maintenir
- âœ… **CompatibilitÃ©** - Fonctionne sur tout serveur PHP 8.0.30+
- âœ… **DÃ©bogage** - Erreurs claires et traÃ§ables
- âœ… **Portable** - Copiez/collez et Ã§a fonctionne

## ğŸ“š Documentation

- `INSTALLATION.md` - Guide d'installation dÃ©taillÃ©
- `API.md` - Documentation complÃ¨te de l'API
- `TESTING.md` - Guide de test complet

## ğŸ†˜ DÃ©pannage

### Erreurs courantes

1. **Erreur de connexion DB**
   - VÃ©rifiez que XAMPP MySQL est dÃ©marrÃ©
   - VÃ©rifiez les paramÃ¨tres dans `config_native.php`

2. **Erreur de camÃ©ra**
   - Utilisez HTTPS ou localhost
   - Autorisez l'accÃ¨s camÃ©ra dans le navigateur

3. **Erreur 500**
   - VÃ©rifiez les logs d'erreur XAMPP
   - Activez `display_errors` en dÃ©veloppement

### Support

1. ExÃ©cutez `test_installation.php` pour diagnostiquer
2. VÃ©rifiez les logs d'erreur XAMPP
3. Consultez la documentation dans `/docs`

---

**Version 2.0 PHP Natif** - SystÃ¨me professionnel sans dÃ©pendances externes

Compatible PHP 8.0.30 | MySQL via XAMPP | JavaScript Vanilla